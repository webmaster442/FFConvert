<?xml version="1.0" encoding="utf-8"?>
<!--
(c) 2022 Ruzsinszki Gábor
This code is licensed under MIT license (see LICENSE for details)
-->
<Presets
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xmlns="my://presets">
  <!--Audio formats-->
  <Preset ActivatorName="cdaudio" TargetExtension=".wav">
    <Description>Convert a file to CD compatible audio</Description>
    <CommandLine>-i %input% -vn -ar 44100 -ac 2 -c:a pcm_s16le %output%</CommandLine>
    <ParametersToAsk/>
  </Preset>
  <Preset ActivatorName="wav" TargetExtension=".wav">
    <Description>Convert a file to uncompressed WAV audio</Description>
    <CommandLine>-i %input% -vn %samplerate% %channels% -c:a pcm_s16le %output%</CommandLine>
    <ParametersToAsk>
      <PresetParameter
        ParameterName="%samplerate%"
        ParameterDescription="Sample rate (empty = no change)"
        IsOptional="true"
        OptionalContent="-ar %samplerate%"
        Validator="IntValidator"
        ValidatorParameters="min=8000;max=192000"/>
      <PresetParameter
        ParameterName="%channels%"
        ParameterDescription="Number of channels (empty = no change)"
        IsOptional="true"
        OptionalContent="-ac %channels%"
        Validator="IntValidator"
        ValidatorParameters="min=1;max=8"/>
    </ParametersToAsk>
  </Preset>
  <Preset ActivatorName="flac" TargetExtension=".flac">
    <Description>Convert a file to FLAC audio</Description>
    <CommandLine>-i %input% -vn -c:a flac -compression_level %compression% %output%</CommandLine>
    <ParametersToAsk>
      <PresetParameter
        ParameterName="%compression%"
        ParameterDescription="Compression level (Lower is faster) (min=1, max=8)"
        Validator="IntValidator"
        ValidatorParameters="min=1;max=8"/>
    </ParametersToAsk>
  </Preset>
  <Preset ActivatorName="wavpack" TargetExtension=".wv">
    <Description>Convert a file to WavPack audio</Description>
    <CommandLine>-i %input% -vn -c:a wavpack -compression_level %compression% %output%</CommandLine>
    <ParametersToAsk>
      <PresetParameter
        ParameterName="%compression%"
        ParameterDescription="Compression level (Lower is faster) (min=1, max=8)"
        Validator="IntValidator"
        ValidatorParameters="min=1;max=5"/>
    </ParametersToAsk>
  </Preset>
  <Preset ActivatorName="alac" TargetExtension=".flac">
    <Description>Convert a file to Apple losless audio</Description>
    <CommandLine>-i %input% -vn -c:a alac %output%</CommandLine>
    <ParametersToAsk/>
  </Preset>
  <Preset ActivatorName="mp3" TargetExtension=".mp3">
    <Description>Convert a file to mp3 audio. Valid bitrates in kbps: 8,16,24,32,40,48,64,80,96,112,128,160,192,224,256,320</Description>
    <CommandLine>-i %input% -vn -c:a mp3 -b:a %bitrate% %output%</CommandLine>
    <ParametersToAsk>
      <PresetParameter
        ParameterName="%bitrate%"
        ParameterDescription="Audio bitrate in kbps:"
        Validator="ListValidator"
        Converter="KbpsConverter"
        ValidatorParameters="valid=8,16,24,32,40,48,64,80,96,112,128,160,192,224,256,320"/>
    </ParametersToAsk>
  </Preset>
  <Preset ActivatorName="mp3-vbr" TargetExtension=".mp3">
    <Description>Convert a file to mp3 audio with variable bitrate encoding.</Description>
    <CommandLine>-i %input% -vn -c:a mp3 -q:a %quality% %output%</CommandLine>
    <ParametersToAsk>
      <PresetParameter
        ParameterName="%quality%"
        ParameterDescription="Audio quality (0-9, lower is better):"
        Validator="IntValidator"
        ValidatorParameters="min=1;max=9"/>
    </ParametersToAsk>
  </Preset>
  <Preset ActivatorName="m4a" TargetExtension=".m4a">
    <Description>Convert a file to mp4 audio. Valid bitrates in kbps: 8,16,24,32,40,48,64,80,96,112,128,160,192,224,256,320</Description>
    <CommandLine>-i %input% -vn -c:a aac -b:a %bitrate% %output%</CommandLine>
    <ParametersToAsk>
      <PresetParameter
        ParameterName="%bitrate%"
        ParameterDescription="Audio bitrate in kbps:"
        Validator="ListValidator"
        Converter="KbpsConverter"
        ValidatorParameters="valid=8,16,24,32,40,48,64,80,96,112,128,160,192,224,256,320"/>
    </ParametersToAsk>
  </Preset>
  <Preset ActivatorName="ac3" TargetExtension=".ac3">
    <Description>Convert a file to Dolby Digital AC3. Valid bitrates in kbps: 32,40,48,56,64,80,96,112,128,160,192,224,256,320,384,448,512,576,640</Description>
    <CommandLine>-i %input% -vn -c:a ac3 -b:a %bitrate% %output%</CommandLine>
    <ParametersToAsk>
      <PresetParameter
        ParameterName="%bitrate%"
        ParameterDescription="Audio bitrate in kbps:"
        Validator="ListValidator"
        Converter="KbpsConverter"
        ValidatorParameters="valid=32,40,48,56,64,80,96,112,128,160,192,224,256,320,384,448,512,576,640"/>
    </ParametersToAsk>
  </Preset>
  <Preset ActivatorName="dts" TargetExtension=".dts">
    <Description>Convert a file to DTS. (Uses experimental encoder)</Description>
    <CommandLine>-i %input% -vn -strict -2 -c:a dts -b:a %bitrate% %output%</CommandLine>
    <ParametersToAsk>
      <PresetParameter
        ParameterName="%bitrate%"
        ParameterDescription="Audio bitrate in kbps (can be 1536 or 768):"
        Validator="ListValidator"
        Converter="KbpsConverter"
        ValidatorParameters="valid=1536,768"/>
    </ParametersToAsk>
  </Preset>
  <Preset ActivatorName="wma" TargetExtension=".wma">
    <Description>Convert a file to Windows media audio. Valid bitrates in kbps: 8,16,24,32,40,48,64,80,96,112,128,160,192,224,256,320</Description>
    <CommandLine>-i %input% -vn -c:a wmav2 -b:a %bitrate% %output%</CommandLine>
    <ParametersToAsk>
      <PresetParameter
        ParameterName="%bitrate%"
        ParameterDescription="Audio bitrate in kbps:"
        Validator="ListValidator"
        Converter="KbpsConverter"
        ValidatorParameters="valid=8,16,24,32,40,48,64,80,96,112,128,160,192,224,256,320"/>
    </ParametersToAsk>
  </Preset>
  <!--Video formats-->
  <Preset ActivatorName="mkvremux" TargetExtension=".mkv">
    <Description>Remux video to mkv format</Description>
    <CommandLine>-i %input% -c:v copy -c:a copy %output%</CommandLine>
    <ParametersToAsk/>
  </Preset>
  <Preset ActivatorName="dvd-pal" TargetExtension=".mpeg">
    <Description>Convert video to DVD compatible (PAL) format</Description>
    <CommandLine>-i %input% -target pal-dvd %output%</CommandLine>
    <ParametersToAsk/>
  </Preset>
  <Preset ActivatorName="webm" TargetExtension=".webm">
    <Description>Convert video to Web compatible Webm format with VP8 encoding</Description>
    <CommandLine>-i %input% -c:v libvpx -quality good -speed 2 -crf %quality% -b:v 0 %output%</CommandLine>
    <ParametersToAsk>
      <PresetParameter
        ParameterName="%quality%"
        ParameterDescription="Video Quality (min=0, max=63, lower is better):"
        Validator="IntValidator"
        ValidatorParameters="min=0;max=63"/>
    </ParametersToAsk>
  </Preset>
  <Preset ActivatorName="dvd-ntsc" TargetExtension=".mpeg">
    <Description>Convert video to DVD compatible (NTSC) format</Description>
    <CommandLine>-i %input% -target ntsc-dvd %output%</CommandLine>
    <ParametersToAsk/>
  </Preset>
  <Preset ActivatorName="cut" TargetExtension="%sourceext%">
    <Description>Cut out a part of the source media without recode</Description>
    <CommandLine>-i %input% -ss %starttime% %endtime% -c:a copy -c:v copy %output%</CommandLine>
    <ParametersToAsk>
      <PresetParameter
        ParameterName="%starttime%"
        ParameterDescription="Start time (empty means 0)"
        Validator="TimeValidator"
        Converter="StartTimeConverter"/>
      <PresetParameter
        ParameterName="%endtime%"
        ParameterDescription="End time (empty means till the end of file)"
        Validator="TimeValidator"
        Converter="EndTimeConverter"
        IsOptional="true"
        OptionalContent="-t %endtime%"/>
    </ParametersToAsk>
  </Preset>
  <Preset ActivatorName="nv-h264" TargetExtension=".mp4">
    <Description>Convert file to h264 encoded mp4 with Nvidia hardware encoding</Description>
    <CommandLine>-vsync 0 -hwaccel nvdec -i %input% -c:v h264_nvenc -preset p5 -c:a aac -q:a 2 %output%</CommandLine>
    <ParametersToAsk/>
  </Preset>
  <Preset ActivatorName="nv-h264hd" TargetExtension=".mp4">
    <Description>Convert file to h264 encoded mp4 with Nvidia hardware encoding</Description>
    <CommandLine>-vsync 0 -hwaccel nvdec -i %input% -c:v h264_nvenc -preset p5 -vf "scale='min(1920,iw)':'min(1080,ih)'" -c:a aac -q:a 2 %output%</CommandLine>
    <ParametersToAsk/>
  </Preset>
  <Preset ActivatorName="nv-h264hd30" TargetExtension=".mp4">
    <Description>Convert file to h264 encoded mp4 with Nvidia hardware encoding</Description>
    <CommandLine>-vsync 0 -hwaccel nvdec -i %input% -c:v h264_nvenc -preset p5 -vf "scale='min(1920,iw)':'min(1080,ih)',fps=fps=30" -c:a aac -q:a 2 %output%</CommandLine>
    <ParametersToAsk/>
  </Preset>
  <Preset ActivatorName="nv-h265" TargetExtension=".mp4">
    <Description>Convert file to h264 encoded mp4 with Nvidia hardware encoding</Description>
    <CommandLine>-vsync 0 -hwaccel nvdec -i %input% -c:v hevc_nvenc -preset slow -c:a aac -q:a 2 %output%</CommandLine>
    <ParametersToAsk/>
  </Preset>
  <Preset ActivatorName="nv-h265hd" TargetExtension=".mp4">
    <Description>Convert file to h264 encoded mp4 with Nvidia hardware encoding</Description>
    <CommandLine>-vsync 0 -hwaccel nvdec -i %input% -c:v hevc_nvenc -preset slow -vf "scale='min(1920,iw)':'min(1080,ih)'" -c:a aac -q:a 2 %output%</CommandLine>
    <ParametersToAsk/>
  </Preset>
  <Preset ActivatorName="nv-h265hd30" TargetExtension=".mp4">
    <Description>Convert file to h264 encoded mp4 with Nvidia hardware encoding</Description>
    <CommandLine>-vsync 0 -hwaccel nvdec -i %input% -c:v hevc_nvenc -preset slow -vf "scale='min(1920,iw)':'min(1080,ih)',fps=fps=30" -c:a aac -q:a 2 %output%</CommandLine>
    <ParametersToAsk/>
  </Preset>
</Presets>
